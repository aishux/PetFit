<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Behaviour Snapshot Upload</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="navbar.css">
<style>
    body {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        background: #f9f9f9;
        color: #333;
    }
    .hero {
        background: linear-gradient(135deg, #ff9a9e, #fad0c4);
        padding: 50px 20px;
        text-align: center;
        color: white;
    }
    .hero h1 {
        font-size: 2.4em;
        margin-bottom: 10px;
    }
    .hero p {
        font-size: 1.1em;
        opacity: 0.9;
    }
    .upload-container {
        max-width: 500px;
        margin: 40px auto;
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        text-align: center;
    }
    .drop-zone {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border: 2px dashed rgba(255, 117, 140, 0.6);
        border-radius: 15px;
        background: #fff;
        padding: 30px;
        min-height: 180px;
        cursor: pointer;
        transition: background 0.3s ease, border-color 0.3s ease;
    }
    
    .drop-zone:hover {
        background: #fff4f6;
        border-color: rgba(255, 117, 140, 0.8);
    }
    
    .drop-zone-icon {
        font-size: 2rem;
        color: rgba(255, 117, 140, 0.8);
        margin-bottom: 10px;
    }
    
    .drop-zone-text {
        font-size: 1em;
        color: #555;
        text-align: center;
    }
    
    .preview {
        margin-top: 20px;
    }
    .preview img, .preview video {
        max-width: 100%;
        border-radius: 10px;
    }
    .description {
        margin-top: 20px;
        text-align: left;
    }
    .description label {
        font-weight: 600;
    }
    .description textarea {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border-radius: 8px;
        border: 1px solid #ccc;
        resize: vertical;
    }
    .submit-btn {
        margin-top: 20px;
        background: linear-gradient(135deg, #ff9a9e, #fad0c4);
        border: none;
        padding: 12px 25px;
        font-size: 1.1em;
        font-weight: bold;
        color: white;
        border-radius: 50px;
        cursor: pointer;
        transition: 0.3s;
    }
    .submit-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }
</style>
</head>
<body>

<div class="navbar">
    <a href="index.html" class="navbar-logo">üêæ PetFit</a>
    <div class="navbar-links">
        <a href="index.html">Home</a>
        <a href="wearable.html">Wearable Devices</a>
        <a href="behaviour-upload.html">Behaviour Upload</a>
        <a href="behaviour-view.html">Behaviour Gallery</a>
        <a href="chatbot.html">Pet AI Chat</a>
        <a href="about.html">About</a>
    </div>
</div>

<div class="hero">
    <h1>Behaviour Snapshot Upload</h1>
    <p>Upload images or videos to record your pet‚Äôs behavior</p>
</div>

<div class="upload-container">
    <label class="drop-zone" id="drop-zone">
        <input type="file" id="file-input" accept="image/*,video/*">
        <p>üìÇ Drag & drop or click to upload</p>
    </label>
    
    <div class="preview" id="preview"></div>
    
    <div class="description">
        <label for="desc">Add Notes / Tags:</label>
        <textarea id="desc" rows="3" placeholder="E.g., 'Barking at stranger', 'Playing fetch'"></textarea>
    </div>
    
    <button class="submit-btn">Submit Snapshot</button>
</div>

<!-- Keep your existing HTML/CSS exactly the same -->
<script>
    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');
    const preview = document.getElementById('preview');

    dropZone.addEventListener('click', () => fileInput.click());

    fileInput.addEventListener('change', () => {
        preview.innerHTML = '';
        const file = fileInput.files[0];
        if (!file) return;

        const fileURL = URL.createObjectURL(file);
        let element;
        if (file.type.startsWith('image/')) {
            element = document.createElement('img');
        } else if (file.type.startsWith('video/')) {
            element = document.createElement('video');
            element.controls = true;
        }
        element.src = fileURL;
        preview.appendChild(element);
    });

    // Handle submit
    document.querySelector('.submit-btn').addEventListener('click', () => {
        const file = fileInput.files[0];
        const desc = document.getElementById('desc').value.trim();

        if (!file) {
            alert("Please upload an image or video.");
            return;
        }
        if (!desc) {
            alert("Please add behaviour notes/tags.");
            return;
        }

        // Save to localStorage
        const reader = new FileReader();
        reader.onload = () => {
            localStorage.setItem('petSnapshot', reader.result); // image/video as base64
            localStorage.setItem('petBehaviour', desc);
            window.location.href = 'behaviour-view.html'; // go to view page
        };
        reader.readAsDataURL(file);
    });
</script>

</body>
</html>
